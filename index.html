<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Виселица</title>

	</head>
	<body>
		<h1>Виселица!</h1>
		<script>
			let words = [                                                 
				"морковка",
				"виселица",
				"верблюд",
				"чебурашка"
			];
			
			// выбираем случайное слово
			let word = words[Math.floor(Math.random() * words.length)];
			
			// создаем итоговый массив и заполняем неотгаданные буквы прочерками
			let answerArray = [];
			for (let i = 0; i < word.length; i++){
				answerArray[i] = "_";
			}
			// Задаем количество букв, которое надо угадать
			let remainigLetters = word.length;
			// Создаем доп переменную 
			let newRemainigLetters = remainigLetters;
			
			//Создадим переменную с количеством жизней
			let lives = 7;
			
			
			// Основной цикл игры
			while ((remainigLetters > 0) && (lives !== 0)){
				// Показываем состояние игры
				alert("Жизней: " + lives + "\n" + answerArray.join(" ") + "\n" + remainigLetters + " букв, чтобы пойти"); 
			
				// Запрашиваем букву
				let guess = prompt("Угадай букву, или нажми Отмена для выхода из игры.");
			
				// Проверяем подходят ли введенные данные
				if (guess === null){
					break;
				} else if (guess.length !== 1) {
					alert("Пожалуйста, введите одиночную букву.")
				} else {
					guess = guess.toLowerCase();
					for (let j = 0; j < word.length; j++) {
			
						// Проверяем есть ли буква среди уже угаданных
						if (answerArray[j] === guess) {
							alert("Извините, эта буква уже есть ... попробуйте еще раз :|")
							break;
						}
						// Проверяем угадали ли букву
						if(word[j] === guess){
						answerArray[j] = guess;
						remainigLetters--;
						}               
					}
				}
			
				// Проверяем, уменьшилось ли количество оставшихся букв, которые надо отгадать
				if (remainigLetters === newRemainigLetters) {
					lives--;            
				}
				// Обновляем  доп переменную с количеством оставшихся букв
				newRemainigLetters = remainigLetters;
			} 
			// развязка после цикла
			if (lives === 0) {
				alert("Ваша жизнь окончена :( Скрытое слово было:" + word);
			} else if(remainigLetters === 0){
				alert("Поздравляем! Скрытое слово было: " + word);
			} else {
				alert("Хххмммм .... ладно, пока .. (-_-)");
			}
			</script>
	</body>
</html>
